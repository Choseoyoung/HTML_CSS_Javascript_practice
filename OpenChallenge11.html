<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>캔버스에 파이 차트 그리기</title>
</head>
<body>
	<h3>학점 별로 학생 수를 입력하면 파이 차트로 비율 그리기</h3>
	<hr>
	<form>
		A <input type="number" value=0 id="A"> 명
		B <input type="number" value=0 id="B"> 명
		C <input type="number" value=0 id="C"> 명<br>
		D <input type="number" value=0 id="D"> 명
		F <input type="number" value=0 id="F"> 명
		<input type="button" id="button" value="차트그리기" onclick="draw()">
	</form>
	<canvas id="myCanvas" style="background-color:aliceblue" width="600" height="400"></canvas>

	<script>
		var canvas = document.getElementById("myCanvas");
		var context = canvas.getContext("2d");
		var width=canvas.width/2+50;
		var height=canvas.height/2;
		var angle=0;
		var sum=0;

		var colors=["blue","green","yellow","magenta","red"];
		var grades=["A","B","C","D","F"];
		var percent=[0.8,0.2,0.2,0.5,0.3];

		function draw() {
			context.clearRect(0,0,canvas.width,canvas.height);
			for(var i=0;i<5;i++){
				percent[i]=parseInt(document.getElementById(grades[i]).value);
				sum+=percent[i];
			}
			for(var i=0;i<5;i++){
				percent[i]=percent[i]/sum*2;
			}
			for(var i=0;i<5;i++){
				context.beginPath();
				context.moveTo(width,height);
				context.arc(width,height,150,angle,angle+percent[i]*Math.PI);
				angle+=(percent[i]*Math.PI);
				context.closePath();
				context.fillStyle=colors[i];
				context.fill();
			}
			context.strokeStyle="blue";
			for(var i=0;i<5;i++){
				context.strokeText(grades[i]+" 학점"+(percent[i]*50).toFixed(0)+"% : "+colors[i],20,30+i*15);
			}
		}
	</script>
</body>
</html>